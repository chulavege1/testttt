(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1062:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(13),i=a(37),s=a(5),o=a.n(s),c=a(163),d=a.n(c),m=a(25),u=a(74),b=a(15),v=a.n(b),f=a(24),h=function(e){d()(e);var t=Object(r.b)(),a=t.setOnePoolDataState,s=t.setUserAccountData.userAccountData,c=a.assetDataOneReserves,m=18==+(null==c?void 0:c.decimals)?"ether":6==+(null==c?void 0:c.decimals)?"mwei":"gwei",b=Object(i.h)().symbol;console.log("userOneReservezzzzzzz",c);var h=Number(v()((null==s?void 0:s.healthFactor._hex)+"0000000000").toFixed(2,v.a.ROUND_DOWN)),g=new v.a(null==s?void 0:s.ltv._hex),E=null==c?void 0:c._reserveCurrentBalanceData.currentATokenBalance.toString(),w=+(null==c?void 0:c.decimals),N=Object(l.useState)(),p=o()(N,2),_=p[0],S=p[1];Object(l.useEffect)((function(){c&&(18===w?S(Number(f.utils.fromWei(E,"ether"))):8===w?S(f.utils.fromWei(E+"0","gwei")):6===w&&S(f.utils.fromWei(E,"mwei")))}),[c]);var F=Object(l.useState)(!1),x=o()(F,2),O=x[0],y=x[1];return Object(l.useEffect)((function(){y(!0)}),[]),n.a.createElement("div",{className:"".concat(O&&c?"active_block":"hidden_block")},n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"card__top card-top"},n.a.createElement("div",{className:"card-top__left"},n.a.createElement("div",{className:"value"},"Additional information"))),n.a.createElement("div",{className:"card-top__content"},n.a.createElement("div",{className:"top-content__body top-content__body--withdraw"},n.a.createElement("div",{className:"top-content__col top-content__col--balance"},n.a.createElement("div",{className:"label label--md mb-5"},"Your balance in Centes "),n.a.createElement("div",{className:"title"},_?Number(_).toFixed(4):"-",_&&n.a.createElement("span",{className:"remainder"},b))),n.a.createElement("div",{className:"top-content__col"},n.a.createElement("div",{className:"label label--md mb-5"},"Health factor:"),n.a.createElement("div",{className:"title title--green"},h&&s&&"1.15792089237316195423570985008687907853269984665640564039457584007913129639935e+77"!==h.toString()?Number(h.toString().substring(0,10)).toFixed(2):"-")),n.a.createElement("div",{className:"top-content__col"},n.a.createElement("div",{className:"label label--md mb-5"},"Available liqudity"),n.a.createElement("div",{className:"title title--green"},c?Number(f.utils.fromWei(c.availableLiquidity.toString(),m)).toFixed(4):"-")),n.a.createElement("div",{className:"top-content__col"},n.a.createElement("div",{className:"label label--md mb-5"},"Loan to value:"),n.a.createElement("div",{className:"title"},s&&Object(u.a)(g.toString().substring(0,4))+" %"))))))},g=a(12),E=a.n(g),w=a(6),N=a.n(w),p=a(35),_=a(44),S=a(29),F=a(54),x=a(57),O=a(34),y=a(32),C=a(75),D=a(21),j=a(53),W=a(96),k=a(24),A=function(e){var t,a,s,c,d,u,b,f,h=e.selectedProvider,g=e.web3Modal,w=e.injectedProvider,A=e.loadWeb3Modal,T=Object(i.h)(),H=T.underluing,P=T.symbol,B=T.amount,M=T.max,L=null==h?void 0:h.getSigner(),U=Object(r.b)(),R=U.actionTransactionDataState,q=U.setUserAccountData,I=U.setUserAssetDataContext,z=U.setOnePoolDataState,G=U.contracts,Y=z.assetDataOneReserves,J=I.userAssetData,V=q.userAccountData,$=R.transactionReceipt,K=R.transactionHash,Q=Object(S.b)().setIsMobileWidthVersion.isMobile,X=G.lendingPoolContract,Z=G.LENDING_POOL_ADDRESS,ee=(a=(t={className:"amount__input",type:"number"}).className,s=t.type,c=Object(l.useState)(B),d=o()(c,2),u=d[0],b=d[1],f=n.a.createElement(n.a.Fragment,null,n.a.createElement("input",{className:a,value:u,placeholder:"Amount",type:s,onChange:function(e){return b(me?Number(e.target.value)>Number(k.utils.fromWei(null==Y?void 0:Y.availableLiquidity.toString(),ue))?Number(k.utils.fromWei(null==Y?void 0:Y.availableLiquidity.toString(),ue)):e.target.value:de?Number(e.target.value)>de?de.toString():e.target.value:Number(e.target.value)>Number(he.toString())?he.toString():e.target.value,He(!1))}}),n.a.createElement("button",{className:"amount__btn",type:"withdrawAll",onClick:function(e){b(he&&Y&&!me?de&&!isNaN(de)?de:he.toString():k.utils.fromWei(null==Y?void 0:Y.availableLiquidity.toString(),ue)),He(de===he||!!isNaN(de))}},"Max")),[u,f]),te=o()(ee,2),ae=te[0],le=te[1],ne=Object(l.useState)(!1),re=o()(ne,2),ie=(re[0],re[1],Object(l.useState)()),se=o()(ie,2),oe=se[0],ce=se[1];Object(l.useEffect)((function(){if(!0===oe){var e=setTimeout((function(){ce(!1)}),400);return function(){return clearTimeout(e)}}}),[oe]),console.log("dasdasddasdasdasdasdasdasdas",ae);var de,me=Y&&V&&Number(k.utils.fromWei(null==Y?void 0:Y.availableLiquidity.toString(),"ether"))<Number(k.utils.fromWei(null==Y?void 0:Y._reserveCurrentBalanceData.currentATokenBalance.toString(),"ether")),ue=18==+(null==Y?void 0:Y.decimals)?"ether":8==+(null==Y?void 0:Y.decimals)?"gwei":"mwei",be=null==J?void 0:J[P],ve=null==be?void 0:be.currentATokenBalance.toString(),fe=18==+(null==Y?void 0:Y.decimals)?"ether":6==+(null==Y?void 0:Y.decimals)?"mwei":"gwei",he=Y&&k.utils.fromWei(null==Y?void 0:Y._reserveCurrentBalanceData.currentATokenBalance.toString(),fe);if(null!=be&&be.usageAsCollateralEnabled&&null!=Y&&Y.usageAsCollateralEnabled&&"0"!==k.utils.fromWei(V.totalDebtETH.toString(),"ether")&&V){var ge=new v.a("0"),Ee=new v.a(null==V?void 0:V.healthFactor._hex);if(Ee=k.utils.fromWei(null==V?void 0:V.healthFactor._hex.toString(),"ether"),(Ee=new v.a(Ee).minus("1")).gt("0")){var we=(+("0."+(null==Y?void 0:Y.liquidationThreshold.toString()))).toFixed(2);we=we.toString(),ge=Ee.multipliedBy(k.utils.fromWei(V.totalDebtETH.toString(),"ether")).div(we).multipliedBy("0.99")}de=v.a.min(he,ge.dividedBy(k.utils.fromWei(Y.priceOracle.toString(),"ether"))).toString()}var Ne=new v.a(ae||0),pe=new v.a(ae||0);Ne.eq("-1")&&V&&J&&("0"!==k.utils.fromWei(V.totalDebtETH.toString(),"ether")&&(de.eq(ve)||(Ne=de)),pe=de);var _e=V&&Object(_.b)(k.utils.fromWei(V.totalCollateralETH.toString(),"ether")),Se=V&&"0."+(null==V?void 0:V.currentLiquidationThreshold.toString()),Fe=V&&Object(_.b)(null==V?void 0:V.healthFactor._hex);if(null!=be&&be.usageAsCollateralEnabled&&null!=Y&&Y.usageAsCollateralEnabled){var xe,Oe=Y&&(null===(xe=pe)||void 0===xe?void 0:xe.multipliedBy(k.utils.fromWei(Y.priceOracle.toString(),"ether")));_e=_e.minus(Oe),Se=Object(_.b)(k.utils.fromWei(V.totalCollateralETH.toString(),"ether")).multipliedBy("0."+(null==V?void 0:V.currentLiquidationThreshold.toString())).minus(Object(_.b)(Oe).multipliedBy((+("0."+(null==Y?void 0:Y.liquidationThreshold.toString()))).toFixed(2))).div(_e).toFixed(4,v.a.ROUND_DOWN),(Fe=Object(_.a)(_e,k.utils.fromWei(V.totalDebtETH.toString(),"ether"),Se)).lt("1")&&"0"!==k.utils.fromWei(V.totalDebtETH.toString(),"ether")&&"Error! errorCanNotWithdrawThisAmount"}de=Y&&Number(de).toFixed(+Y.decimals),he=Y&&Number(he).toFixed(+Y.decimals);var ye=Object(l.useState)(),Ce=o()(ye,2),De=Ce[0],je=Ce[1],We=function(){var e=E()(N.a.mark((function e(){var t,a,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new p.a.Contract(H,j.a,L),e.next=3,L.getAddress();case 3:return a=e.sent,e.next=6,t.allowance(a,Z);case 6:l=e.sent,console.log("_allowance",l),je(l);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){We()}),[h]);var ke=Object(l.useState)(!1),Ae=o()(ke,2),Te=Ae[0],He=Ae[1],Pe=Object(l.useState)(!1),Be=o()(Pe,2),Me=Be[0],Le=Be[1];Object(l.useEffect)((function(){Le(!0)}),[]);var Ue=V&&"0"===k.utils.fromWei(V.totalDebtETH.toString(),"ether"),Re=(Ue&Ue&&Fe.toNumber(),Ue&&Ue&&Fe.toNumber(),Object(i.f)());return console.log("injectedProvidadasdasdaser",Y&&Number(he).toFixed(0)),Y&&0!==Number(he).toFixed(0)?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"".concat(Me&&Y?"active_block":"hidden_block")},n.a.createElement("div",{className:"".concat(1===$.status?"borderGreen":""," col card grow-1")},n.a.createElement("div",{className:"card__content card__content--md p-60-24 m-auto"},n.a.createElement(y.a,{type:"back",classNameChild:"btn btn--red btn--small"}),n.a.createElement(D.a,{showImg:!0,showSpan:!1,symbolChild:P,directory:"/assets-main"}),n.a.createElement(W.a,{action:"Withdraw"}),n.a.createElement("div",{className:"detail__body mb-40"},n.a.createElement("div",{className:"grid-row grid-row--mb-20 mt-50"},1===$.status?"":n.a.createElement(n.a.Fragment,null,!Q&&n.a.createElement("div",{className:"grid-row__left flex-col"},n.a.createElement("div",{className:"label label--md"},B?"Amount":"Available to withdraw")),n.a.createElement("div",{className:"grid-row__right"},n.a.createElement("div",{className:"flex-col"},Q&&n.a.createElement("div",{className:"label label--md"},B?"Amount":"Available to withdraw"),n.a.createElement("div",{className:"value"},B||(me?k.utils.fromWei(null==Y?void 0:Y.availableLiquidity.toString(),ue):he.toString())),n.a.createElement("div",null,Y&&n.a.createElement(m.a,{tableBool:!0,offUsdSymbols:!1,valueCalculate:null==Y?void 0:Y.priceOracle.toString(),decimals:+(null==Y?void 0:Y.decimals),selectedProvider:h,currentBalanceForUserTokenChildInWei:B||(me?k.utils.fromWei(null==Y?void 0:Y.availableLiquidity.toString(),ue):he.toString())})))))),(null==K?void 0:K._transactionHash)&&n.a.createElement("div",{className:"grid-row grid-row--mb-40 mt-30"},n.a.createElement("div",{className:"grid-row__base"},n.a.createElement("div",{className:"progress"},n.a.createElement("ul",{className:"progress__steps \n                                            ".concat(1===$.status?"step-3":null!=K&&K._transactionHash?"step-2":"step-1")},n.a.createElement("li",null),n.a.createElement("li",null),n.a.createElement("li",null),n.a.createElement("li",null),n.a.createElement("li",null)),n.a.createElement("ul",{className:"progress__labels"},De&&"0"!==De.toString()?"":n.a.createElement("li",{className:"label--md label--dark"},"Approve"),n.a.createElement("li",{className:"label--md label--dark"},"Withdraw"),n.a.createElement("li",{className:"label--md label--dark"},"Finished"))))),1===$.status||null!=K&&K._transactionHash?"":n.a.createElement("div",{className:"grid-row__base"},n.a.createElement("div",{className:"amount mb-40 ".concat(oe?"ahashakeheartache":"")},le),Y&&ae&&n.a.createElement(m.a,{classNameChild:"posa",tableBool:!0,offUsdSymbols:!1,valueCalculate:null==Y?void 0:Y.priceOracle.toString(),decimals:+(null==Y?void 0:Y.decimals),selectedProvider:h,currentBalanceForUserTokenChildInWei:ae||B})),n.a.createElement("div",{className:"df mt-40 width100"},n.a.createElement("div",{className:"grid-row__right"},De&&"0"===De.toString()?n.a.createElement("div",{className:"grid-row__right"},n.a.createElement("div",{className:""},"Approve"),n.a.createElement("p",{className:"label label--wrap"},"Please approve before withdraw.")):n.a.createElement("div",{className:"grid-row__right"},n.a.createElement("div",{className:"flex-column"},1===$.status?null:n.a.createElement("div",{className:""},"Withdraw"),n.a.createElement("p",{className:"label label--wrap"},1===$.status?"You transaction has succefull":null!=K&&K._transactionHash?"Wait you transaction has sent":"Submit to withdraw")))),B!==ae&&n.a.createElement("div",{className:"grid-row__right"},n.a.createElement("button",{className:"btn btn--red btn--small ",onClick:function(){void 0!==ae&&0!=+ae?Re.push("/withdraw/".concat(P,"/").concat(H,"/").concat(ae).concat(Te?"/-1":"")):ce(!0)}},"Continue")),null!=K&&K._transactionHash?n.a.createElement(O.a,null):ae&&B&&B===ae&&1!==$.status&&n.a.createElement("div",{className:"grid-row__left a-end"},n.a.createElement(C.a,{type:"withdraw",buttonClassNameChild:"btn btn--red btn--small",divWrapperClassNameChild:"text-center",assetData:Y,signer:L,lendingPoolContract:X,amountFromRouteUrl:"-1"===(null==M?void 0:M.toString())?"-1":B,userAccountData:V,swapModeEnabled:!1,selectedProvider:h})))))))):w?n.a.createElement(F.a,{walletBalanceInHumanityDecimals:void 0!==he||void 0!==de?0:void 0,selectedProvider:h,web3Modal:g,action:"withdraw"}):n.a.createElement(x.a,{loadWeb3Modal:A,web3Modal:g})},T=n.a.memo(A),H=function(e){var t=e.selectedProvider,a=e.web3Modal,s=e.loadWeb3Modal,o=e.injectedProvider,c=Object(i.h)().symbol,d=Object(r.b)(),m=d.setOnePoolDataState,u=d.setPoolDataState,b=u.assetData;Object(l.useEffect)((function(){var e;(null==b?void 0:b.length)===u.assetsActiveLength&&(null===(e=m.assetDataOneReserves)||void 0===e?void 0:e.symbol)!==c&&m.setSymbol(c)}),[b]);var v=Object(i.g)();return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"main active"},n.a.createElement("div",{className:"dashboard active"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"dashboard__body row-flex flex-col"},n.a.createElement("div",{className:"col card mb-30"},n.a.createElement(h,{selectedProvider:t})),n.a.createElement(i.c,{location:v},n.a.createElement(i.a,{exact:!0,path:"/withdraw/:symbol/:underluing/:amount?/:max?",component:function(){return n.a.createElement(T,{injectedProvider:o,selectedProvider:t,web3Modal:a,loadWeb3Modal:s})}})))))))};t.default=n.a.memo(H)},25:function(e,t,a){"use strict";var l=a(0),n=a.n(l),r=a(13),i=a(24),s=function(e){var t,a=e.classNameChild,l=e.valueCalculate,s=e.tableBool,o=e.offUsdSymbols,c=e.currentBalanceForUserTokenChildInWei,d=Object(r.b)().setPriceOracleETH.priceOracleETH;if(d){console.log("valCalcPriceOracle",d);var m=l?i.utils.fromWei(l.toString(),"ether"):0;t=c?Number(c*(m*d)).toFixed(2):Number(d*m).toFixed(2)}return n.a.createElement("div",{className:a||""},s&&"$ ",t,s||void 0!==o?o&&" USD":" USD")};t.a=n.a.memo(s)},74:function(e,t,a){"use strict";function l(e){return e.toString().replace(/\B(?=(\d{2})+(?!\d))/g,".")}a.d(t,"a",(function(){return l}))},75:function(e,t,a){"use strict";var l=a(12),n=a.n(l),r=a(5),i=a.n(r),s=a(6),o=a.n(s),c=a(0),d=a.n(c),m=a(37),u=a(35),b=a(53),v=a(29),f=a(13),h=a(34),g=a(24);function E(e){var t=e.swapModeEnabled,a=e.amountFromRouteUrl,l=e.assetData,r=e.signer,s=e.type,E=(e.assetPrice,e.setLiveAsset,e.lendingPool,e.buttonClassNameChild),w=e.usageAsCollateral,N=(e.styleChild,e.lendingPoolContract),p=e.apyType,_=e.borrowType,S=e.repayMode,F=e.usageAsCollateralEnabled,x=Object(m.h)().underluing,O=Object(c.useState)(),y=i()(O,2),C=y[0],D=y[1];Object(c.useEffect)((function(){D(p)}),[p]);var j=Object(c.useState)(),W=i()(j,2),k=W[0],A=W[1];Object(c.useEffect)((function(){A(p)}),[p]);var T=Object(f.b)().actionTransactionDataState,H=T.setTransactionHash,P=T.transactionHash,B=Object(v.b)().LENDING_POOL_ADDRESS,M=function(){var e=n()(o.a.mark((function e(){var t,n,i,c,d,m,v,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=18==+l.decimals?"ether":8==+l.decimals?"gwei":"mwei",n=a&&g.utils.toWei(a.toString(),t),i="-1"===(null==a?void 0:a.toString())?"withdraw"===s?"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff":"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF":n,e.next=5,r.getAddress();case 5:if(c=e.sent,d=x&&new u.a.Contract(x,b.a,r),v="0".toString(),"deposit"!==s){e.next=12;break}return e.next=11,N.deposit(l.tokenAddress,i,c,v);case 11:m=e.sent;case 12:if("withdraw"!==s){e.next=16;break}return e.next=15,N.withdraw(l.tokenAddress,i,c);case 15:m=e.sent;case 16:if("borrow"!==s){e.next=20;break}return e.next=19,N.borrow(l.tokenAddress,i,_,0,c);case 19:m=e.sent;case 20:if("repay"!==s){e.next=24;break}return e.next=23,N.repay(l.tokenAddress,i,S,c);case 23:m=e.sent;case 24:if("usage-as-collateral"!==s||!F){e.next=28;break}return e.next=27,N.setUserUseReserveAsCollateral(l.tokenAddress,!w);case 27:m=e.sent;case 28:if("swap-borrow-rate"!==s){e.next=32;break}return e.next=31,N.swapBorrowRateMode(l.tokenAddress,0===l._reserveCurrentBalanceData.stableRateLastUpdated?"2":"1");case 31:m=e.sent;case 32:if("approve"!==s){e.next=36;break}return e.next=35,d.approve(B,i);case 35:m=e.sent;case 36:({}),f=m.hash,H({_transactionHash:f,type:s});case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{onMouseEnter:function(){A(!p)},onMouseLeave:function(){A(!k)},className:F||"swap-borrow-rate"===s?C?"switch switch--green right":"switch switch--green flex-end":"switch flex-center"},null!=P&&P._transactionHash?d.a.createElement("div",{style:{position:"absolute",top:"15px",left:"15px"}}," ",d.a.createElement(h.a,null)," "):null,d.a.createElement("button",{className:E,style:{background:"swap-borrow-rate"===s?k?"var(--switch-green)":"var(--btn-blue)":"",color:"#fff"},key:"submit",type:s,onClick:M},t?"usage-as-collateral"===s?k&&F?"Yes":"No":"swap-borrow-rate"===s:s)));return d.a.createElement(d.a.Fragment,null,L)}t.a=d.a.memo(E)},96:function(e,t,a){"use strict";var l=a(0),n=a.n(l),r=a(13);t.a=function(e){var t,a=e.action,l=Object(r.b)().actionTransactionDataState,i=l.transactionReceipt,s=l.transactionHash;return console.log("transactionHtransactionHashash",i),console.log("2222",s),1===(null==i?void 0:i.status)?n.a.createElement("div",{className:"detail__top mb-40 text-center"},n.a.createElement("h2",{className:"title mb-20"},a," confirmed"),n.a.createElement("p",{className:"description mb-20"},"Wiew transaction info"),n.a.createElement("a",{style:{width:"100%"},className:"text-center",target:"_blank",rel:"nofollow",href:"0x38"===(null===(t=window.ethereum)||void 0===t?void 0:t.chainId)?"https://bscscan.com/tx/":"https://polygonscan.com/tx/"+(null==i?void 0:i.transactionHash)},"Etherscan")):n.a.createElement("div",{className:"detail__top mb-40 text-center"},n.a.createElement("h2",{className:"title mb-20"},a," overview"),n.a.createElement("p",{className:"description"},"These are your transaction details. Make sure to check if this is correct before submitting."))}}}]);
//# sourceMappingURL=6.index.js.map