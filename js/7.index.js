(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1059:function(e,a,t){"use strict";t.r(a);var l=t(5),r=t.n(l),n=t(0),s=t.n(n),o=t(32),c=t(29),i=t(75),d=t(34),m=t(15),b=t.n(m),f=t(24),u=t.n(f),v=t(25),E=t(21),_=t(59),N=t(57),p=t(54),h=t(74),g=t(44),w=t(13),y=function(e){var a=e.lendingPool,t=e.injectedProvider,l=e.selectedProvider,m=e.web3Modal,f=e.loadWeb3Modal,y=Object(n.useState)([]),C=r()(y,2),F=C[0],x=C[1],S=Object(n.useState)([]),D=r()(S,2),k=D[0],A=D[1],B=Object(n.useState)(),O=r()(B,2),T=O[0],P=O[1],j=Object(n.useState)(),R=r()(j,2),M=R[0],W=R[1],H=Object(w.b)(),U=H.setUserAccountData,I=H.setReserveTokensContext,L=H.setPriceOracleETH,V=H.setPoolDataState,q=(H.setUserAssetDataContext,H.contracts),Y=V.assetData,z=L.priceOracleETH,$=I.reserveTokens,J=U.userAccountData,G=Object(c.b)().setIsMobileWidthVersion.isMobile,Z=q.lendingPoolContract,K=J&&Number(u.a.utils.fromWei(J.totalDebtETH.toString()+"0","gwei")).toFixed(2);K&&z&&Number(K);console.log("userAccountData123",J&&Number(K)/z),console.log("userAssetDatadadsdfromdashboards",J);var Q=null==l?void 0:l.getSigner(),X=["availableBorrowsETH","currentLiquidationThreshold","healthFactor","ltv","totalCollateralETH","totalDebtETH"];Object(n.useEffect)((function(){if(J){var e=Object.keys(J).filter((function(e){return X.includes(e)})).reduce((function(e,a){return e[a]=J[a].toString(),e}),{});W(e)}}),[J,$]);var ee=Object(n.useState)(!1),ae=r()(ee,2),te=ae[0],le=ae[1];Object(n.useEffect)((function(){le(!0)}),[]);var re=J&&Number(b()((null==J?void 0:J.healthFactor._hex)+"0000000000").toFixed(2,b.a.ROUND_DOWN));return console.log("userAccdasdasdoun",J),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"".concat(te?"active_block":"hidden_block")},t&&m.cachedProvider.toString().length>"0"?s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"dashboard__body dashboard__body--over row-flex flex-col"},s.a.createElement("div",{className:"col card mb-30"},s.a.createElement("div",{className:"card__inner--dashboard inner-dashboard"},s.a.createElement(_.a,null),s.a.createElement("div",{className:"inner-dashboard__left"},s.a.createElement("div",{className:"card__top card-top"},s.a.createElement("div",{className:"card-top__left"},s.a.createElement("div",{className:"value"},"Deposit information"))),s.a.createElement("div",{className:"inner-dashboard__content"},s.a.createElement("ul",{className:"inner-dashboard__list inner-dashboard__list--deposit"},s.a.createElement("li",{className:"inner-dashboard__item-deposit"},s.a.createElement("div",{className:"label label--md"},"Aggregated balance:"),s.a.createElement("div",{className:"title"},"number"==typeof F?+(null==F?void 0:F.toFixed(2))+" $":"-"))))),s.a.createElement("div",{className:"inner-dashboard__right"},s.a.createElement("div",{className:"card__top card-top"},s.a.createElement("div",{className:"card-top__left"},s.a.createElement("div",{className:"value"},"Borrow information"))),s.a.createElement("div",{className:"inner-dashboard__content"},s.a.createElement("ul",{className:"inner-dashboard__list inner-dashboard__list--borrow"},s.a.createElement("li",{className:"inner-dashboard__item posR"},s.a.createElement("div",{className:"label label--md"},"Health factor:"),s.a.createElement("p",{className:"title title--green"},M&&"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"!==(null==J?void 0:J.healthFactor._hex)?Number(re.toString().slice(0,10)).toFixed(2):"-"),s.a.createElement("div",{style:{position:"absolute"},className:"title title--green ".concat(T?"modal-hp-before":"opacity0")},s.a.createElement("span",null,T?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{style:{fontSize:"16px"}},"Current = "+Number(re.toString().slice(0,10)).toFixed(2)),s.a.createElement("p",{style:{fontSize:"16px"},className:T>=1?T>=1.5?" color-green  flex-end":"color-yellow flex-end":"color-red flex-end"},"After switch = "+T)):""))),s.a.createElement("li",{className:"inner-dashboard__item"},s.a.createElement("div",{className:"label label--md"},"You borrowed:"),s.a.createElement("div",{className:"title"},M&&"0"!==M.totalDebtETH?Number(k).toFixed(2)+" $ ":"-")),s.a.createElement("li",{className:"inner-dashboard__item"},s.a.createElement("div",{className:"label label--md"},"Current LTV:"),s.a.createElement("div",{className:"title"},s.a.createElement("span",null,M&&"0"!==M.ltv?Object(h.a)(M.ltv)+" %":"-")))),s.a.createElement("div",{className:"inner-dashboard__progress inner-dashboard__progress--borrow"})))))),(null==Y?void 0:Y.length)===V.assetsActiveLength&&"0"!==(null==J?void 0:J.availableBorrowsETH.toString())?s.a.createElement("div",{className:"col col--board-table card grow-1 "},s.a.createElement("div",{className:"board-table"},s.a.createElement(_.a,null),G?"":s.a.createElement("div",{className:"board-table__header"},s.a.createElement("div",{className:"board-table__row board-table__row--header"},s.a.createElement("div",{style:{justifyContent:"start"},className:"board-table__col"},s.a.createElement("div",{className:"label label--md label--dark"},"Deposit")),s.a.createElement("div",{className:"board-table__col"},s.a.createElement("div",{className:"label label--md label--dark"},"Current balance")),s.a.createElement("div",{className:"board-table__col"},s.a.createElement("div",{className:"label label--md label--dark"},"Deposit APR")),s.a.createElement("div",{className:"board-table__col"},s.a.createElement("div",{className:"label label--md label--dark"},"Use Collateral")),s.a.createElement("div",{style:{minWidth:"210px"},className:"board-table__col"},s.a.createElement("div",{className:"label label--md label--dark"},"Actions")))),Y.map((function(e,t){var r=Math.pow(10,27),c=e.liquidityRate.toString(),d=0===Number(+c/r*100)?"0":Number(+c/r*100).toFixed(4),m=(18===e.decimals||e.decimals,e?18==+e.decimals?u.a.utils.fromWei(e._reserveCurrentBalanceData.currentATokenBalance.toString(),"ether"):6==+e.decimals?u.a.utils.fromWei(e._reserveCurrentBalanceData.currentATokenBalance.toString(),"mwei"):u.a.utils.fromWei(e._reserveCurrentBalanceData.currentATokenBalance.toString()+"0","gwei"):0),f=e.priceOracle?Number(u.a.utils.fromWei(e.priceOracle.toString(),"ether")):0,_=m*f;console.log("priceTokenInEth",f,e.symbol);var N=!e.usageAsCollateralEnabled,p=J&&new b.a(u.a.utils.fromWei(J.totalCollateralETH._hex.toString(),"ether")),h=J&&p[N?"plus":"minus"](_),w=Number("0."+(null==J?void 0:J.currentLiquidationThreshold.toString())).toFixed(2),y=Number(k)/z,C=J&&Object(g.a)(+h,y,+w),F=Number(z*u.a.utils.fromWei(e.priceOracle.toString(),"ether")),S=m*F;return Object(n.useEffect)((function(){S&&x((function(e){return+e+ +S}))}),[S]),console.log("resultSummForAggregatedPrice",m,F,e.symbol,S),m*F!=0&&console.log("check123",m*F,e.symbol),C=J&&C.toString().substring(0,4),console.log("asdasqweqweqwe",e),s.a.createElement(s.a.Fragment,null,e._reserveCurrentBalanceData.currentATokenBalance.toString()>"0"&&s.a.createElement("div",{key:t,className:"board-table__row deposits"},s.a.createElement("div",{className:"board-table__col board-table__col--first"},s.a.createElement(E.a,{showImg:!0,showSpan:!0,symbolChild:e.symbol,directory:"/assets-main"})),s.a.createElement("div",{className:"board-table__col"},G?s.a.createElement("p",null,"Current balance"):"",s.a.createElement("div",{className:"table-item__block-val table-value"},s.a.createElement(v.a,{classNameChild:"table-value",symbol:e.symbol,decimals:+e.decimals,currentBalanceForUserTokenChildInWei:m,valueCalculate:e.priceOracle.toString(),selectedProvider:l,tableBool:!0,offUsdSymbols:!1}))),s.a.createElement("div",{className:"board-table__col"},G?s.a.createElement("p",null,"Deposit APR"):"",s.a.createElement("div",{className:"table-item__block-val table-value"},s.a.createElement("span",{className:"table-value table-value--red"},d+" %"))),s.a.createElement("div",{className:"board-table__col"},G?s.a.createElement("p",{style:{width:"105%"}},"Use Collateral"):"",s.a.createElement("div",{className:"board-table__wraper"},s.a.createElement("div",{className:"board-table__switch",onMouseLeave:function(){return P(null)},onMouseEnter:function(){0==+(null==J?void 0:J.totalDebtETH)||P(C)}},s.a.createElement(i.a,{type:"usage-as-collateral",buttonClassNameChild:" ".concat(!1===e.usageAsCollateralEnabled?"pointerEventsNone switch flex-center":"switch__btn active"," "),assetData:e,signer:Q,swapModeEnabled:!0,lendingPoolContract:Z,lendingPool:a,userAccountData:J,usageAsCollateralEnabled:null==e?void 0:e.usageAsCollateralEnabled,usageAsCollateral:null==e?void 0:e._reserveCurrentBalanceData.usageAsCollateralEnabled,apyType:null==e?void 0:e._reserveCurrentBalanceData.usageAsCollateralEnabled})))),s.a.createElement("div",{className:"board-table__col board-table__col--last"},G?s.a.createElement("p",null,"Actions"):"",s.a.createElement("div",{className:"board-table__buttons"},s.a.createElement(o.a,{type:"deposit",assetData:e,classNameChild:"btn btn--red btn--small"}),s.a.createElement(o.a,{type:"withdraw",assetData:e,classNameChild:"btn btn--trans btn--small"})))))})))):"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"!==(null==J?void 0:J.healthFactor._hex)&&s.a.createElement("div",{className:"card"},s.a.createElement("div",{style:{height:"200px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"relative"}},s.a.createElement("div",{style:{position:"absolute",right:"50%"}},s.a.createElement(d.a,null)))),s.a.createElement("div",{className:"col col--board-table card borrows grow-1"},0!==Y.length&&0!=+(null==J?void 0:J.totalDebtETH)?s.a.createElement("div",{className:"board-table"},s.a.createElement(_.a,null),0==+(null==J?void 0:J.totalDebtETH)||G?"":s.a.createElement("div",{className:"board-table__header"},s.a.createElement("div",{className:"board-table__row board-table__row--header"},s.a.createElement("div",{style:{justifyContent:"start"},className:"board-table__col"},s.a.createElement("div",{className:"label label--md label--dark"},"Borrowed")),s.a.createElement("div",{className:"board-table__col"},s.a.createElement("div",{className:"label label--md label--dark"},"You borrowed")),s.a.createElement("div",{className:"board-table__col"},s.a.createElement("div",{className:"label label--md label--dark",style:{color:"var(--btn-blue)"}},"Variable APR")),s.a.createElement("div",{className:"board-table__col"},s.a.createElement("div",{style:{color:"var(--green)"},className:"label label--md label--dark"},"Stable APR")),s.a.createElement("div",{className:"board-table__col"},s.a.createElement("div",{className:"label label--md label--dark",style:{fontSize:"14px"}},"Variable/Stable APR")),s.a.createElement("div",{style:{minWidth:"210px"},className:"board-table__col"},s.a.createElement("div",{className:"label label--md label--dark"},"Actions")))),Y.map((function(e,t){var r,c,d,m,b,f,_=Math.pow(10,27),N=0===Number(+e.variableBorrowRate/_)?"0":Number(+e.variableBorrowRate/_*100).toFixed(4),p=0===Number(+e.stableBorrowRate/_)?"0":Number(+e.stableBorrowRate/_*100).toFixed(4),h=18==+e.decimals?"ether":6==+e.decimals?"mwei":"gwei",g=null===(r=e._reserveCurrentBalanceData)||void 0===r?void 0:r.currentVariableDebt.toString(),w=null===(c=e._reserveCurrentBalanceData)||void 0===c?void 0:c.currentStableDebt.toString(),y=g>w?g:w,C=y&&u.a.utils.fromWei(y.toString(),h),F=C*Number(z*u.a.utils.fromWei(e.priceOracle.toString(),"ether"));return Object(n.useEffect)((function(){F&&A((function(e){return+e+ +F}))}),[F]),console.log("summsummCurrentBalanceCurrentBalance",C),s.a.createElement(s.a.Fragment,null,("0"!==(null===(d=e._reserveCurrentBalanceData)||void 0===d?void 0:d.currentStableDebt.toString())||"0"!==(null===(m=e._reserveCurrentBalanceData)||void 0===m?void 0:m.currentVariableDebt.toString()))&&s.a.createElement("div",{key:t,className:"board-table__row borrows"},s.a.createElement("div",{className:"board-table__col board-table__col--first"},s.a.createElement(E.a,{showImg:!0,showSpan:!0,symbolChild:e.symbol,directory:"/assets-main"})),s.a.createElement("div",{className:"board-table__col"},G?s.a.createElement("p",null,"You borrowed"):"",s.a.createElement("div",{className:"table-item__block-val table-value"},s.a.createElement(v.a,{classNameChild:"table-value",tableBool:!0,decimals:+e.decimals,currentBalanceForUserTokenChildInWei:C,offUsdSymbols:!1,symbol:e.symbol,valueCalculate:e.priceOracle.toString(),selectedProvider:l,swapBorrowRateModeChild:+(null===(b=e._reserveCurrentBalanceData)||void 0===b?void 0:b.stableRateLastUpdated)}))),s.a.createElement("div",{className:"board-table__col"},G?s.a.createElement("p",null,"Variable APR"):"",s.a.createElement("div",{className:"table-item__block-val table-value",style:{color:"var(--btn-blue)"}},Number(N).toFixed(4)+" %")),s.a.createElement("div",{className:"board-table__col"},G?s.a.createElement("p",null,"Stable APR"):"",s.a.createElement("div",{className:"table-item__block-val table-value",style:{color:"var(--green)"}},p+" %")),s.a.createElement("div",{className:"board-table__col"},G?s.a.createElement("p",null,"Variable/Stable APR"):"",s.a.createElement(i.a,{swapModeEnabled:"borrowType",type:"swap-borrow-rate",buttonClassNameChild:"switch__btn active",apyType:0==+(null===(f=e._reserveCurrentBalanceData)||void 0===f?void 0:f.currentVariableDebt),assetData:e,lendingPool:a,signer:Q,lendingPoolContract:Z,userAccountData:J})),s.a.createElement("div",{className:"board-table__col"},G?s.a.createElement("p",null,"Actions"):"",s.a.createElement("div",{className:"board-table__buttons"},s.a.createElement(o.a,{type:"borrow",classNameChild:"btn btn--blue btn--small",lendingPool:a,selectedProvider:l,signer:Q,assetData:e}),s.a.createElement(o.a,{type:"repay",classNameChild:"btn btn--trans btn--small",lendingPool:a,selectedProvider:l,signer:Q,assetData:e})))))}))):0!=+(null==J?void 0:J.totalDebtETH)?s.a.createElement("div",{style:{height:"200px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}," ",s.a.createElement(d.a,null)," "):s.a.createElement(p.a,{action:!0,isBorrowZero:!0,walletBalanceInHumanityDecimals:0,loadWeb3Modal:f,selectedProvider:l,web3Modal:m}))):void 0===t?s.a.createElement(N.a,{loadWeb3Modal:f,web3Modal:m}):s.a.createElement(p.a,{action:!1,loadWeb3Modal:f,selectedProvider:l,web3Modal:m})))};a.default=s.a.memo(y)},25:function(e,a,t){"use strict";var l=t(0),r=t.n(l),n=t(13),s=t(24),o=function(e){var a,t=e.classNameChild,l=e.valueCalculate,o=e.tableBool,c=e.offUsdSymbols,i=e.currentBalanceForUserTokenChildInWei,d=Object(n.b)().setPriceOracleETH.priceOracleETH;if(d){console.log("valCalcPriceOracle",d);var m=l?s.utils.fromWei(l.toString(),"ether"):0;a=i?Number(i*(m*d)).toFixed(2):Number(d*m).toFixed(2)}return r.a.createElement("div",{className:t||""},o&&"$ ",a,o||void 0!==c?c&&" USD":" USD")};a.a=r.a.memo(o)},74:function(e,a,t){"use strict";function l(e){return e.toString().replace(/\B(?=(\d{2})+(?!\d))/g,".")}t.d(a,"a",(function(){return l}))},75:function(e,a,t){"use strict";var l=t(12),r=t.n(l),n=t(5),s=t.n(n),o=t(6),c=t.n(o),i=t(0),d=t.n(i),m=t(37),b=t(35),f=t(53),u=t(29),v=t(13),E=t(34),_=t(24);function N(e){var a=e.swapModeEnabled,t=e.amountFromRouteUrl,l=e.assetData,n=e.signer,o=e.type,N=(e.assetPrice,e.setLiveAsset,e.lendingPool,e.buttonClassNameChild),p=e.usageAsCollateral,h=(e.styleChild,e.lendingPoolContract),g=e.apyType,w=e.borrowType,y=e.repayMode,C=e.usageAsCollateralEnabled,F=Object(m.h)().underluing,x=Object(i.useState)(),S=s()(x,2),D=S[0],k=S[1];Object(i.useEffect)((function(){k(g)}),[g]);var A=Object(i.useState)(),B=s()(A,2),O=B[0],T=B[1];Object(i.useEffect)((function(){T(g)}),[g]);var P=Object(v.b)().actionTransactionDataState,j=P.setTransactionHash,R=P.transactionHash,M=Object(u.b)().LENDING_POOL_ADDRESS,W=function(){var e=r()(c.a.mark((function e(){var a,r,s,i,d,m,u,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=18==+l.decimals?"ether":8==+l.decimals?"gwei":"mwei",r=t&&_.utils.toWei(t.toString(),a),s="-1"===(null==t?void 0:t.toString())?"withdraw"===o?"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff":"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF":r,e.next=5,n.getAddress();case 5:if(i=e.sent,d=F&&new b.a.Contract(F,f.a,n),u="0".toString(),"deposit"!==o){e.next=12;break}return e.next=11,h.deposit(l.tokenAddress,s,i,u);case 11:m=e.sent;case 12:if("withdraw"!==o){e.next=16;break}return e.next=15,h.withdraw(l.tokenAddress,s,i);case 15:m=e.sent;case 16:if("borrow"!==o){e.next=20;break}return e.next=19,h.borrow(l.tokenAddress,s,w,0,i);case 19:m=e.sent;case 20:if("repay"!==o){e.next=24;break}return e.next=23,h.repay(l.tokenAddress,s,y,i);case 23:m=e.sent;case 24:if("usage-as-collateral"!==o||!C){e.next=28;break}return e.next=27,h.setUserUseReserveAsCollateral(l.tokenAddress,!p);case 27:m=e.sent;case 28:if("swap-borrow-rate"!==o){e.next=32;break}return e.next=31,h.swapBorrowRateMode(l.tokenAddress,0===l._reserveCurrentBalanceData.stableRateLastUpdated?"2":"1");case 31:m=e.sent;case 32:if("approve"!==o){e.next=36;break}return e.next=35,d.approve(M,s);case 35:m=e.sent;case 36:({}),v=m.hash,j({_transactionHash:v,type:o});case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{onMouseEnter:function(){T(!g)},onMouseLeave:function(){T(!O)},className:C||"swap-borrow-rate"===o?D?"switch switch--green right":"switch switch--green flex-end":"switch flex-center"},null!=R&&R._transactionHash?d.a.createElement("div",{style:{position:"absolute",top:"15px",left:"15px"}}," ",d.a.createElement(E.a,null)," "):null,d.a.createElement("button",{className:N,style:{background:"swap-borrow-rate"===o?O?"var(--switch-green)":"var(--btn-blue)":"",color:"#fff"},key:"submit",type:o,onClick:W},a?"usage-as-collateral"===o?O&&C?"Yes":"No":"swap-borrow-rate"===o:o)));return d.a.createElement(d.a.Fragment,null,H)}a.a=d.a.memo(N)}}]);
//# sourceMappingURL=7.index.js.map