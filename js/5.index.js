(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1063:function(e,a,t){"use strict";t.r(a);var l=t(0),r=t.n(l),n=t(37),c=t(13),s=t(12),i=t.n(s),o=t(5),d=t.n(o),m=t(6),u=t.n(m),v=t(35),b=t(44),f=t(29),E=(t(234),t(54)),p=t(57),g=t(34),_=t(21),N=t(25),h=t(15),w=t.n(h),S=t(75),y=t(32),D=t(53),C=t(96),O=t(24),F=function(e){var a=e.selectedProvider,t=e.web3Modal,s=e.injectedProvider,o=e.loadWeb3Modal,m=Object(n.h)(),_=m.underluing,h=m.symbol,F=m.amount,x=m.max,k=Object(c.b)(),B=(k.setPoolDataState,k.setUserAccountData),j=(k.setUserAssetDataContext,k.setOnePoolDataState),P=k.contracts,R=k.actionTransactionDataState,A=j.assetDataOneReserves,W=R.transactionReceipt,U=R.transactionHash,M=B.userAccountData,H=P.lendingPoolContract,T=(P.LENDING_POOL_ADDRESS,Object(f.b)().setIsMobileWidthVersion.isMobile),I=function(e){var a=e.className,t=e.type,n=Object(l.useState)(F),c=d()(n,2),s=c[0],i=c[1];Object(l.useEffect)((function(){return i(F)}),[F]);var o=r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:t,placeholder:"Amount",className:a,value:s,maxlength:+(null==A?void 0:A.decimals),onChange:function(e){0!=+(null==A?void 0:A._reserveCurrentBalanceData.currentVariableDebt)?se>ee?i(ee):+e.target.value>+se?i(e.target.value=se):i(e.target.value):ie>ee?i(ee):+e.target.value>+ie?i(e.target.value=ie):i(e.target.value),ve(!1)}}),r.a.createElement("button",{className:"amount__btn",onClick:function(){i(0!=+(null==A?void 0:A._reserveCurrentBalanceData.currentVariableDebt)?se>ee?ee:se:ie>ee?ee:ie),ve(0!=+(null==A?void 0:A._reserveCurrentBalanceData.currentVariableDebt)?!(se>ee):!(ie>ee))},type:"button"},"Max"));return[s,o]}({className:"amount__input",type:"number"}),L=d()(I,2),V=L[0],q=L[1],z=null==a?void 0:a.getSigner(),Y=Object(l.useState)(),G=d()(Y,2),J=G[0],$=G[1],K=function(){var e=i()(u.a.mark((function e(){var a,t,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new v.a.Contract(_,D.a,z),e.next=3,z.getAddress();case 3:return t=e.sent,e.next=6,a.balanceOf(t);case 6:l=e.sent,$(8==+(null==A?void 0:A.decimals)?l.toString()+"0":l.toString());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){A&&K()}),[A]);var Q=0!=+(null==A?void 0:A._reserveCurrentBalanceData.currentVariableDebt)?"2":"1",X=Object(l.useState)(),Z=d()(X,2),ee=Z[0],ae=Z[1];console.log("walletBalanceInHumanityDecimals",ee),Object(l.useEffect)((function(){A&&J&&(18==+A.decimals?ae(O.utils.fromWei(J,"ether")):8==+A.decimals?ae(O.utils.fromWei(J,"gwei")):6==+A.decimals&&ae(O.utils.fromWei(J,"mwei")))}),[A,J]);var te=Object(l.useState)(),le=d()(te,2),re=le[0],ne=le[1];Object(l.useEffect)((function(){if(!0===re){var e=setTimeout((function(){ne(!1)}),400);return function(){return clearTimeout(e)}}}),[re]);var ce=18==+(null==A?void 0:A.decimals)?"ether":8==+(null==A?void 0:A.decimals)?"gwei":"mwei",se=A&&O.utils.fromWei(A._reserveCurrentBalanceData.currentVariableDebt.toString(),ce),ie=A&&O.utils.fromWei(A._reserveCurrentBalanceData.currentStableDebt.toString(),ce),oe=Object(n.f)(),de=Object(l.useState)(!1),me=d()(de,2),ue=me[0],ve=me[1];var be=A&&O.utils.fromWei(null==A?void 0:A.priceOracle.toString(),"ether"),fe=V*be,Ee=M&&new w.a(O.utils.fromWei(M.totalCollateralETH._hex,"ether")),pe=M&&Ee.plus(fe),ge=(M&&Object(b.a)(pe,O.utils.fromWei(null==M?void 0:M.totalDebtETH.toString(),"ether"),"0."+(null==M?void 0:M.currentLiquidationThreshold.toString())),+(null==A?void 0:A._reserveCurrentBalanceData.currentVariableDebt)>0?"Variable":+(null==A?void 0:A._reserveCurrentBalanceData.currentStableDebt)>0?"Stable":"None");console.log("healthFactorAfterSwitch",ge);var _e=Object(l.useState)(!1),Ne=d()(_e,2),he=Ne[0],we=Ne[1];return Object(l.useEffect)((function(){we(!0)}),[]),A&&s&&"None"!==ge?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(he&&A?"active_block":"hidden_block")},r.a.createElement("div",{className:"main container active"},r.a.createElement("div",{className:"".concat(1===W.status?"borderGreen":""," col card grow-1")},r.a.createElement(y.a,{type:"back",classNameChild:"btn btn--red btn--small"}),r.a.createElement("div",{className:"".concat(he&&A?"ahashakeheartache":""," card__content card__content--md p-60-24 m-auto")},r.a.createElement(C.a,{action:"Repay"}),r.a.createElement("div",{className:"detail__body"},r.a.createElement("div",{className:"grid-row grid-row--mb-40"},!T&&r.a.createElement("div",{className:"grid-row__left flex-col"},r.a.createElement("div",{className:"label label--md"},F?"Repay":"Available to repay")),r.a.createElement("div",{className:"grid-row__right"},r.a.createElement("div",{className:"flex-col"},T&&r.a.createElement("div",{className:"label label--md"},F?"Repay":"Available to repay"),r.a.createElement("div",{className:"value"},F||(0!=+(null==A?void 0:A._reserveCurrentBalanceData.currentVariableDebt)?se>ee?ee:se:ie>ee?ee:ie)),r.a.createElement("div",{className:"label"},A&&r.a.createElement(N.a,{tableBool:!0,decimals:+(null==A?void 0:A.decimals),offUsdSymbols:!1,valueCalculate:null==A?void 0:A.priceOracle.toString(),selectedProvider:a,currentBalanceForUserTokenChildInWei:F||(0!=+(null==A?void 0:A._reserveCurrentBalanceData.currentVariableDebt)?se>ee?ee:se:ie>ee?ee:ie)}))))),r.a.createElement("div",{className:"grid-row grid-row--mb-40"},r.a.createElement("div",{className:"grid-row__base"},r.a.createElement("div",{className:"progress"},r.a.createElement("ul",{className:"progress__steps \n                                        ".concat(1===W.status?"step-3":null!=U&&U._transactionHash?"step-2":"step-1")},r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null)),r.a.createElement("ul",{className:"progress__labels"},r.a.createElement("li",{className:"label--md label--dark"},"Repay"),r.a.createElement("li",{className:"label--md label--dark"},"Finished"))))),1===W.status||null!=U&&U._transactionHash?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-row__base"},r.a.createElement("div",{className:"amount mb-10 mt-10 ".concat(re?"ahashakeheartache":"")},q),V&&r.a.createElement(N.a,{classNameChild:"posa",tableBool:!0,decimals:+(null==A?void 0:A.decimals),offUsdSymbols:!1,valueCalculate:null==A?void 0:A.priceOracle.toString(),selectedProvider:a,currentBalanceForUserTokenChildInWei:F&&V===F?F.toString():V?V&&V:0!=+(null==A?void 0:A._reserveCurrentBalanceData.currentStableDebt)?O.utils.fromWei(null==A?void 0:A._reserveCurrentBalanceData.currentStableDebt.toString(),"ether"):O.utils.fromWei(null==A?void 0:A._reserveCurrentBalanceData.currentVariableDebt.toString(),"ether")}))),r.a.createElement("div",{className:"grid-row mt-40"},r.a.createElement("div",{className:"grid-row__left"}),r.a.createElement("div",{className:"grid-row__left flex-column text-left"},1===W.status?null:r.a.createElement("div",{className:""},"Repay"),r.a.createElement("p",{className:"label label--wrap"},1===W.status?"You transaction has succefull":null!=U&&U._transactionHash?"Wait you transaction has sent":"Submit to repay")),r.a.createElement("div",{className:"grid-row__right a-end"},1===W.status?"":r.a.createElement(r.a.Fragment,null,0!=+V&&+F!=+V&&r.a.createElement("button",{className:"btn btn--red btn--big ",onClick:function(){void 0!==V?oe.push("/repay/".concat(h,"/").concat(_,"/").concat(V).concat(ue?"/-1":"")):ne(!0)}},"Continue"),1===W.status||null!=U&&U._transactionHash?r.a.createElement(g.a,null):F&&+F==+V&&r.a.createElement(S.a,{type:"repay",buttonClassNameChild:"btn btn--red btn--small",divWrapperClassNameChild:"text-center",assetData:A,signer:z,amountFromRouteUrl:x?"-1"===(null==x?void 0:x.toString())&&"-1":V,lendingPoolContract:H,userAccountData:M,swapModeEnabled:!1,selectedProvider:a,repayMode:Q})))))))))):s?r.a.createElement(E.a,{walletBalanceInHumanityDecimals:"0"===(null==ie?void 0:ie.toString())||"0"===(null==se?void 0:se.toString())?0:void 0,selectedProvider:a,web3Modal:t,action:"repay"}):r.a.createElement(p.a,{loadWeb3Modal:o,web3Modal:t})},x=(t(74),t(24)),k=t.n(x),B=function(e){var a,t=e.selectedProvider,s=Object(n.h)().symbol,i=Object(c.b)().setOnePoolDataState.assetDataOneReserves,o=Math.pow(10,27);i&&(null==i?void 0:i.priceOracle.toString(),a={totalLiquidityInUsd:void 0,totalBorrowsInUsd:void 0,availableLiquidityInUsd:void 0,availableLiquidity:k.a.utils.fromWei(i.availableLiquidity.toString(),18==+i.decimals?"ether":8==+i.decimals?"gwei":"mwei"),stableRateAPY:Number(i.stableBorrowRate)/o,variableRateAPY:Number(i.variableBorrowRate)/o,utilizationRate:Number(i.liquidityRate)/k.a.utils.fromWei(i.availableLiquidity.toString(),18==+i.decimals?"ether":8==+i.decimals?"gwei":"mwei")});var m=18==+(null==i?void 0:i.decimals)?"ether":8==+(null==i?void 0:i.decimals)?"gwei":"mwei",u=Object(l.useState)(!1),v=d()(u,2),b=v[0],f=v[1];Object(l.useEffect)((function(){f(!0)}),[]);var E=i?+(null==i?void 0:i._reserveCurrentBalanceData.currentStableDebt)>0?k.a.utils.fromWei(i._reserveCurrentBalanceData.currentStableDebt.toString(),m):k.a.utils.fromWei(null==i?void 0:i._reserveCurrentBalanceData.currentVariableDebt.toString(),m):0;return console.log("assetDataOneReserves?._reserveCurrentBalanceData",E),i?r.a.createElement("div",{className:"".concat(b&&i?"active_block":"hidden_block")},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col card mb-30"},r.a.createElement("div",{className:"card__top card-top"},r.a.createElement("div",{className:"card-top__left"},r.a.createElement("div",{className:"value"},"Repay ",s)),r.a.createElement("div",{className:"card-top__center hidden-md"},r.a.createElement("a",{href:"",className:"altcoin altcoin--card-top "},r.a.createElement("div",{className:"altcoin__name value"},s," Reserve overview"),r.a.createElement(_.a,{showImg:!0,showSpan:!1,symbolChild:s,directory:"/assets-main"}))),r.a.createElement("div",{className:"card-top__right"})),b&&r.a.createElement("div",{className:"top-content__wrapper"},r.a.createElement("div",{className:"top-content__body top-content__body--deposit"},r.a.createElement("div",{className:"top-content__col"},r.a.createElement("div",{className:"label label--md mb-5"},"Utilization rate"),r.a.createElement("div",{className:"value"},void 0!==a.utilizationRate&&a.utilizationRate!==1/0?Number(a.utilizationRate.toString().slice(0,10)).toFixed(2):"-"," ",void 0!==a.utilizationRate&&a.utilizationRate!==1/0&&a.utilizationRate&&"%",r.a.createElement("span",{className:"remainder"}," "))),r.a.createElement("div",{className:"top-content__col"},r.a.createElement("div",{className:"label label--md mb-5"},"Available liquidity"),r.a.createElement("div",{className:"value"},Number(a.availableLiquidity).toFixed(5)," ",s," ")),r.a.createElement("div",{className:"top-content__col"},r.a.createElement("div",{className:"label label--md mb-5"},"Asset price"),r.a.createElement("div",{className:"value"},r.a.createElement(N.a,{tableBool:!0,onlyAssetPrice:!0,decimals:+(null==i?void 0:i.decimals),offUsdSymbols:!1,valueCalculate:null==i?void 0:i.priceOracle.toString(),selectedProvider:t}))),r.a.createElement("div",{className:"top-content__col"},r.a.createElement("div",{className:"label label--md mb-5"},"Collateral composition"),r.a.createElement("div",{className:"value value--green"},null!=i&&i.usageAsCollateralEnabled?"Yes":"No")),r.a.createElement("div",{className:"top-content__col"},r.a.createElement("div",{className:"label label--md mb-5"},"You borrowed"),r.a.createElement("div",{className:"value"},r.a.createElement(N.a,{tableBool:!0,onlyAssetPrice:!0,decimals:+i.decimals,offUsdSymbols:!1,valueCalculate:null==i?void 0:i.priceOracle.toString(),currentBalanceForUserTokenChildInWei:E,selectedProvider:t}))))),r.a.createElement("div",{className:"card-top__content"},r.a.createElement("div",{className:"top-content__wrapper"},!b&&r.a.createElement("div",{className:"card-top__detail top-detail"},r.a.createElement("div",{className:"top-detail__body"},r.a.createElement("div",{className:"top-detail__left"},r.a.createElement("div",{className:"top-detail__col"},r.a.createElement("div",{className:"grid-row"},r.a.createElement("div",{className:"top-content__col"},r.a.createElement("div",{className:"label label--md mb-5"},"Deposits balance"),r.a.createElement("div",{className:"value"},i?Number(k.a.utils.fromWei(i._reserveCurrentBalanceData.currentATokenBalance.toString(),m))+" "+s:"-"))),r.a.createElement("div",{className:"grid-row__right"})),r.a.createElement("div",{className:"grid-row"},r.a.createElement("div",{className:"grid-row__right"}))),r.a.createElement("div",{className:"top-detail__col"})))))))):""};a.default=function(e){var a=e.selectedProvider,t=e.web3Modal,s=e.injectedProvider,i=e.loadWeb3Modal,o=Object(n.h)().symbol,d=Object(c.b)(),m=d.setOnePoolDataState,u=d.setPoolDataState,v=u.assetData;return Object(l.useEffect)((function(){var e;(null==v?void 0:v.length)===u.assetsActiveLength&&(null===(e=m.assetDataOneReserves)||void 0===e?void 0:e.symbol)!==o&&(m.setSymbol(o),console.log("walletBalanceInHumanityDecimals"))}),[v]),r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{selectedProvider:a}),r.a.createElement(F,{selectedProvider:a,web3Modal:t,loadWeb3Modal:i,injectedProvider:s}))}},25:function(e,a,t){"use strict";var l=t(0),r=t.n(l),n=t(13),c=t(24),s=function(e){var a,t=e.classNameChild,l=e.valueCalculate,s=e.tableBool,i=e.offUsdSymbols,o=e.currentBalanceForUserTokenChildInWei,d=Object(n.b)().setPriceOracleETH.priceOracleETH;if(d){console.log("valCalcPriceOracle",d);var m=l?c.utils.fromWei(l.toString(),"ether"):0;a=o?Number(o*(m*d)).toFixed(2):Number(d*m).toFixed(2)}return r.a.createElement("div",{className:t||""},s&&"$ ",a,s||void 0!==i?i&&" USD":" USD")};a.a=r.a.memo(s)},74:function(e,a,t){"use strict";function l(e){return e.toString().replace(/\B(?=(\d{2})+(?!\d))/g,".")}t.d(a,"a",(function(){return l}))},75:function(e,a,t){"use strict";var l=t(12),r=t.n(l),n=t(5),c=t.n(n),s=t(6),i=t.n(s),o=t(0),d=t.n(o),m=t(37),u=t(35),v=t(53),b=t(29),f=t(13),E=t(34),p=t(24);function g(e){var a=e.swapModeEnabled,t=e.amountFromRouteUrl,l=e.assetData,n=e.signer,s=e.type,g=(e.assetPrice,e.setLiveAsset,e.lendingPool,e.buttonClassNameChild),_=e.usageAsCollateral,N=(e.styleChild,e.lendingPoolContract),h=e.apyType,w=e.borrowType,S=e.repayMode,y=e.usageAsCollateralEnabled,D=Object(m.h)().underluing,C=Object(o.useState)(),O=c()(C,2),F=O[0],x=O[1];Object(o.useEffect)((function(){x(h)}),[h]);var k=Object(o.useState)(),B=c()(k,2),j=B[0],P=B[1];Object(o.useEffect)((function(){P(h)}),[h]);var R=Object(f.b)().actionTransactionDataState,A=R.setTransactionHash,W=R.transactionHash,U=Object(b.b)().LENDING_POOL_ADDRESS,M=function(){var e=r()(i.a.mark((function e(){var a,r,c,o,d,m,b,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=18==+l.decimals?"ether":8==+l.decimals?"gwei":"mwei",r=t&&p.utils.toWei(t.toString(),a),c="-1"===(null==t?void 0:t.toString())?"withdraw"===s?"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff":"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF":r,e.next=5,n.getAddress();case 5:if(o=e.sent,d=D&&new u.a.Contract(D,v.a,n),b="0".toString(),"deposit"!==s){e.next=12;break}return e.next=11,N.deposit(l.tokenAddress,c,o,b);case 11:m=e.sent;case 12:if("withdraw"!==s){e.next=16;break}return e.next=15,N.withdraw(l.tokenAddress,c,o);case 15:m=e.sent;case 16:if("borrow"!==s){e.next=20;break}return e.next=19,N.borrow(l.tokenAddress,c,w,0,o);case 19:m=e.sent;case 20:if("repay"!==s){e.next=24;break}return e.next=23,N.repay(l.tokenAddress,c,S,o);case 23:m=e.sent;case 24:if("usage-as-collateral"!==s||!y){e.next=28;break}return e.next=27,N.setUserUseReserveAsCollateral(l.tokenAddress,!_);case 27:m=e.sent;case 28:if("swap-borrow-rate"!==s){e.next=32;break}return e.next=31,N.swapBorrowRateMode(l.tokenAddress,0===l._reserveCurrentBalanceData.stableRateLastUpdated?"2":"1");case 31:m=e.sent;case 32:if("approve"!==s){e.next=36;break}return e.next=35,d.approve(U,c);case 35:m=e.sent;case 36:({}),f=m.hash,A({_transactionHash:f,type:s});case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{onMouseEnter:function(){P(!h)},onMouseLeave:function(){P(!j)},className:y||"swap-borrow-rate"===s?F?"switch switch--green right":"switch switch--green flex-end":"switch flex-center"},null!=W&&W._transactionHash?d.a.createElement("div",{style:{position:"absolute",top:"15px",left:"15px"}}," ",d.a.createElement(E.a,null)," "):null,d.a.createElement("button",{className:g,style:{background:"swap-borrow-rate"===s?j?"var(--switch-green)":"var(--btn-blue)":"",color:"#fff"},key:"submit",type:s,onClick:M},a?"usage-as-collateral"===s?j&&y?"Yes":"No":"swap-borrow-rate"===s:s)));return d.a.createElement(d.a.Fragment,null,H)}a.a=d.a.memo(g)},96:function(e,a,t){"use strict";var l=t(0),r=t.n(l),n=t(13);a.a=function(e){var a,t=e.action,l=Object(n.b)().actionTransactionDataState,c=l.transactionReceipt,s=l.transactionHash;return console.log("transactionHtransactionHashash",c),console.log("2222",s),1===(null==c?void 0:c.status)?r.a.createElement("div",{className:"detail__top mb-40 text-center"},r.a.createElement("h2",{className:"title mb-20"},t," confirmed"),r.a.createElement("p",{className:"description mb-20"},"Wiew transaction info"),r.a.createElement("a",{style:{width:"100%"},className:"text-center",target:"_blank",rel:"nofollow",href:"0x38"===(null===(a=window.ethereum)||void 0===a?void 0:a.chainId)?"https://bscscan.com/tx/":"https://polygonscan.com/tx/"+(null==c?void 0:c.transactionHash)},"Etherscan")):r.a.createElement("div",{className:"detail__top mb-40 text-center"},r.a.createElement("h2",{className:"title mb-20"},t," overview"),r.a.createElement("p",{className:"description"},"These are your transaction details. Make sure to check if this is correct before submitting."))}}}]);
//# sourceMappingURL=5.index.js.map